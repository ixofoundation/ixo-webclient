---
id: lskev6m6
title: lib-protocol-entity
file_version: 1.1.3
app_version: 1.15.0
---

StargateSigning function for updating entity status, startDate, endDate, credentials
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/lib/protocol/entity.ts
<!-- collapsed -->

```typescript
178    export const UpdateEntity = async (
179      client: SigningStargateClient,
180      signer: TSigner,
181      payload: Partial<MsgUpdateEntity>,
182    ) => {
183      const queryClient = await createRPCQueryClient({ rpcEndpoint: RPC_ENDPOINT! })
184      const entity = await queryClient.ixo.entity.v1beta1.entity({
185        id: payload?.id || signer.address,
186      })
187      if (!entity.entity) {
188        throw new Error('Entity not found')
189      }
190    
191      const message = {
192        typeUrl: '/ixo.entity.v1beta1.MsgUpdateEntity',
193        value: ixo.entity.v1beta1.MsgUpdateEntity.fromPartial({
194          id: payload?.id || signer.did,
195          entityStatus: payload?.entityStatus === undefined ? entity.entity.status : payload?.entityStatus,
196          startDate: payload?.startDate || entity.entity.startDate,
197          endDate: payload?.endDate || entity.entity.endDate,
198          credentials: payload?.credentials || entity.entity.credentials,
199          controllerDid: signer.did,
200          controllerAddress: signer.address,
201        }),
202      }
203    
204      console.log('UpdateEntity', { message })
205      const response: DeliverTxResponse = await client.signAndBroadcast(signer.address, [message], fee)
206      console.log('UpdateEntity', { response })
207      return response
208    }
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBaXhvLXdlYmNsaWVudCUzQSUzQWl4b2ZvdW5kYXRpb24=/docs/lskev6m6).
